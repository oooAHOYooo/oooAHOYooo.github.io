<!DOCTYPE html>
<!-- APP AHOY -->
<html>
  <head>
    <!-- SUPA INSTALLATION -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@latest"></script>
    <script>
        const supabaseUrl = "https://ornjxycoizoybvdhhowp.supabase.co";
        const supabaseKey =
          "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ybmp4eWNvaXpveWJ2ZGhob3dwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDIzNTA4ODEsImV4cCI6MjAxNzkyNjg4MX0.SIgYEybVeKQ5xGnplA-elTOw0oC5tZIv5nGRUZf-vS8";
        const supabase = supabase.createClient(supabaseUrl, supabaseKey);
      </script>
    <link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css"
      integrity="sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA=="
      crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script defer data-domain="ahoy.ooo" src="https://plausible.io/js/script.js"></script>
    <link rel="stylesheet" href="./css/foundational.css">
    <link rel="stylesheet" href="./css/mobileOS-addons.css">
    <link rel="stylesheet" href="./css/section-songs.css">
    <link rel="stylesheet" href="./css/section-media.css">
    <!-- END OF AG ADDITIONS TO HEAD -->
    <meta charset="utf-8">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport"
      content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <meta name="color-scheme" content="light dark">

    <title>Ahoy Indie Media</title>
    <!-- JWPLAYER INSTALLATION-->
    <script src="https://cdn.jwplayer.com/libraries/9Gtk2B1J.js"></script>

    <!-- -->

  </head>
  <body>
    <div class="app">
      <header>
        <a href="./index.html">
          <img src="./img/assets/u_ahoy23.png" style="max-width: 20%" />
        </a>
        <a href="js/src/login.html"><button id=#login-btn>Login</button></a>
        <span id="usernameDisplay"></span>
        <div id="user-info" style="position: absolute; top: 10px; right: 10px">
          <!-- User info will be displayed here -->
        </div>
        <!-- Placeholder for the username -->
      </header>
      <div id="tabSortz">
        <!-- HOME TAB -->
        <div id="home-tab" class="tab-content">
          <div id="home-logo-div">
            <a href="./index.html"><img src="./img/assets/u_ahoy23.png" />
            </a>
          </div>
          <br />
          <div class="home-tab-learn-more-wrap">
            <a href="https://github.com/oooAHOYooo/oooAHOYooo.github.io"><button
                class="common-button">Learn
                More</button></a>
            <a href="./js/src/getOn/index.html"><button class="common-button">Get
                On ahoy</button></a>
            <a href="https://7ufdbpnl2tt.typeform.com/to/OKeXjt6z"><button
                class="common-button">Leave
                Feedback</button></a>
          </div>
          <div class="get-started-wrap">
            <a href="./js/src/started.html"><button class="get-started-button">Get
                Started</button></a>
          </div>
          <!-- NOW PLAYING -->
          <div class="now-playing">
            <h1>Now Playing</h1>
            <!-- <img id="album-art" src="path_to_your_album_art.jpg" alt="Album Art">-->
            <div class="song-info">
              <h2 id="current-song-title">Song Title</h2>
              <h3 id="current-song-artist">Artist Name</h3>
            </div>
            <div class="song-controls">
              <button id="prev" class="control-button">
                <i class="fas fa-step-backward"></i>
              </button>
              <button id="play-pause" class="control-button">
                <i class="fas fa-play"></i>
              </button>
              <button id="next" class="control-button">
                <i class="fas fa-step-forward"></i>
              </button>
            </div>
          </div>
          <!-- END OF NOW PLAYING -->
          <!-- FEATURED MEDIA -->
          <!-- 
                  <div id="featured-media-container" class="media-container">
                    <h2>Featured Media</h2>
                    <br />
                    <div id="featured-media">
                     
                    </div>
                  </div>-->

        </div>
        <!-- MARKET TAB-->
        <div id="market-tab" class="tab-content">

          <h1 class="h1-background">Market</h1>
          <nav class="market-nav">
            <a href="#physicalMarket"><button>Physical Market</button></a>
            <a href="#digitalMarket"><button>Digital Market</button></a>
          </nav>
          <div id="physicalMarket">
            <h2>Physical Market</h2>
            <div class="physical-market-row">
              <div id="productGridContainer">
                <div id="productGrid"></div>
              </div>
            </div>
            <div id="cart">
              <h3>Your Physical Product Cart</h3>
              <div id="cartItems"></div>
              <div id="totalPrice"></div>
            </div>
          </div>
          <div id="digitalMarket">
            <h2 style="text-align: center;">Digital Market</h2>
            <table id="digitalMarketTable">
              <thead>
                <tr>
                  <th>Artist</th>
                  <th>Title</th>
                  <th>Genre</th>
                  <th>Price</th>
                  <th>Preview</th>
                  <th>Add To Cart</th>
                </tr>
              </thead>
              <tbody>
                <!-- JavaScript will populate table rows here -->
              </tbody>

            </table>
            <div id="digitalCart">
              <h3>Your Digital Product Cart</h3>
              <div id="digitalCartItems"></div>
              <div id="digitalTotalPrice"></div>
            </div>
          </div>

          <!-- END OF PHYSICAL MARKET -->
          <!-- END OF MARKET -->
        </div><!-- END OF MARKET -->
        <!-- SONGS TAB -->
        <div id="songs-tab" class="tab-content">
          <h1 class="h1-background">Songs</h1>
          <!-- Song Control Panel -->
          <div id="songs-control-panel">
            <input type="text" id="search-bar" placeholder="Search songs..." />
            <div class="sort-buttons">
              <button id="sort-az">A-Z</button>
              <button id="sort-recent">Recently Added</button>
            </div>
          </div>
          <div id="song-wrap-list">
            <ul class="list" id="song-list"></ul>
          </div>
        </div>
        <!-- MEDIA TAB -->

        <div id="media-tab" class="tab-content">
          <div class="media-header">
          <h1 class="h1-background-a">Media</h1>
          </div>
          <div class="tv-wrap">
            <div id="jw-player-container"></div>
          </div>


          <!-- Media Table -->
          <table id="mediaTable" class="list">
            <thead class="mediaTable-header">
              <tr>
                <th>Play</th>
                <th>Cover</th>
                <th>Artist</th>
                <th>Title</th>
               
                
                <th>Duration</th>
                <th>Save</th>
              </tr>
            </thead>
            <tbody>
              <!-- Table data will be inserted here -->
            </tbody>
          </table>
        </div>
        <!-- PODCASTS -->
        <div id="podcasts-tab" class="tab-content">
          <h1 class="h1-background-a">Podcasts</h1>
          <div class="podcast-container">
            <table id="podcast-table" class="full-width-table">
              <thead>
                <tr>
                  <th>Play</th>
                  <th>Thumbnail</th>
                  <th>Title</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
        <!-- AUDIOBOOKS -->
        <!-- div id="audiobooks-tab" class="tab-content">
                  <h1>Song List (temp)</h1>
                </div -->
        <!-- GAMES -->
        <div id="games-tab" class="tab-content">
          <h1 class="h1-background">Games</h1>
          <div class="game-tabs"> <!-- Updated class name -->
            <!-- Tabs will be dynamically added here by the JavaScript -->
          </div>
          <!-- Game content will also be dynamically added here by the JavaScript -->
        </div>

        <!-- Game content will be dynamically added here -->
      </div>
      <!-- ARTIST -->
      <div id="artists-tab" class="tab-content">
        <h1 class="h1-background">Artists</h1>
        <ul id="artist-list"></ul> <!-- Container for the artist list -->
        <div id="artist-iframe-container" style="display:none;">
          <iframe id="artist-iframe" src frameborder="0"
            style="width:100%; height:600px;"></iframe>
        </div>
      </div>
      <!-- UPDATES-->
      <div id="updates-tab" class="tab-content">

        <h1 class="h1-background-a">Updates</h1>

        <div class="version-movie-poster-wrap">
          <img id="lightbox-trigger"
            src="./img/assets/splash-screens/splash-640x960.png"
            class="full-height-image">
        </div>
        <div id="lightbox"
          style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.9);">
          <img id="lightbox-image"
            style="margin: auto; display: block; width: 80%; max-width: 700px;" />
        </div>
        <!-- NEWSLETTER -->
        <div id="newsletter-tab" class="tab-content-b">
          <!-- h1>Newsletter</h1 -->
          <!-- div id="newsletter-list"></div -->
        </div>

        <h3>Present Beta State = 0.2.3a

          <h4>Present Focus</h4>
          <p>Working towards a unified codebase for both Android and Web app -
            targeted launch by New Years Dec 31 2023.</p>
          <h1>Last 100 Updates to our beloved Repo</h1>
          <hr>
          <div id="commits-list"></div>
        </div>
        <!-- ACCOUNT -->
        <div id="account-tab" class="tab-content active">
          <h1 class="h1-background">Your Account</h1>

<div class="library-mainFrame">

  <div class="library-mainFrame-windowWrap">
    <style>
      .library-mainFrame-windowWrap {
        display:flex;
        width: 100%;
      }
    </style>
  <div class="userActionBar">
    <style>
      .userActionBar {
        width: 180px;
      }
    </style>
    <div class="userActionBar-topMenu">
      <style>
        .userActionBar-menuWrap {
          display:flex;
        }
      </style>
<div class="userActionBar-menuWrap">
  <button><i class="fas fa-home"></i></button>
  <button><i class="fas fa-cog"></i> </button>
  <button><i class="fas fa-plus"></i> </button>
</div>
    </div>
    <div class="userActionBar-middleMenu">
    <style>
      .userActionBar-middleMenu {
        display:flex;
        flex-direction: column;
      }

      .userActionBar-middleMenu button {
        width:178px;
        height: 30px;
        padding: 0;
        margin-top: 1.5px;
        margin-bottom: 1.5px;
      }
    </style>
      <div class="userActionBar-middleMenu">
     
        <button>Tracks</button>
        <button>Podcasts</button>
        <button>Media</button>
        <button>Artist</button>
        <button>Market</button>
      </div>
    </div>

  </div>
  <div class="userContentPortal">
    <style>
      .userContentPortal-tab-container {
        border-style: solid;
        border-color: rgb(1, 1, 1);
        background-color: rgba(0, 0, 0, 0.023);
        min-width: 394px;
        min-height: 300px;
      }
    </style>
    <div class="userContentPortal-tab-container">
      <div class="collection-header">
        <div class="collection-title">
          Your Collection Title
        </div>
      </div>
<!--
<div id="1_tracks">Track Grid
</div>
<div id="2_podcasts">Podcast Grid</div>
<div id="3_media">Media</div>
<div id="4_artist">Artist</div>
<div id="5_market">Market</div>
</div>
-->
  </div>
</div>
</div>



          <h2>Your Liked Content</h2>
          <table id="liked-songs-table">
            <thead>
              <tr>
                <th>Artist</th>
                <th>Song</th>
                <th>Play</th>
                <th>Remove</th>
              </tr>
            </thead>
            <tbody>
              <!-- Liked songs will be populated here by the JavaScript function -->
            </tbody>
          </table>
          <h2>Your Cart</h2>
          <div id="cart-items">
            <!-- Items will be dynamically inserted here -->
          </div>
          <h3>Settings</h3>
          <h4 id="theme-title"></h4>
          <button onclick="switchTheme()">change theme</button>
          <br />
        </div>

        <!-- END OF TABS ? CHECK -->
      </div><!-- YES -->
      <!-- BOTTOM PLAYER -->
      <section class="player">
        <div id="progress-bar-container">
          <span id="current-time">0:00</span> /
          <span id="total-duration">0:00</span>
          <div id="progress-bar"></div>
          <div id="playhead"></div>
        </div>
        <div class="player-info">
          <a href="#" id="artist-name" class="player-link">Artist Name</a>
          <a href="#" id="song-title" class="player-link">Song Title</a>
        </div>
        <div class="player-content">
          <div class="player-controls">
            <button id="prev" class="player-button">
              <i class="fas fa-step-backward"></i>
            </button>
            <button id="play" class="player-button">
              <i class="fas fa-play"></i>
            </button>
            <button id="next" class="player-button" onclick="nextSong()">
              <i class="fas fa-step-forward"></i>
            </button>
          </div>
          <div class="player-actions">
            <button id="account" class="player-button">
              <i class="fas fa-user"></i>
            </button>
          </div>
        </div>
        <audio id="audio-player" src></audio>
      </section>
      <div class="bottom-controller fixed-bottom">
        <button id="super-left-arrow" onclick="prevTab()">
          <i class="fas fa-arrow-left"></i>
        </button>
        <span id="tab-indicator">Songs</span>
        <!-- Default text for the first tab -->
        <button id="super-right-arrow" onclick="nextTab()">
          <i class="fas fa-arrow-right"></i>
        </button>
        <script>
      
    </script>
      </div>
      <!-- END OF BOTTOM PLAYER -->
      <!-- CONDITIONAL LOGIC BITCH -->

      <!-- END OF HTML -->
      <div id="theScripts">
        <!-- SONG LOADER-->
        <script id="songLoader">
      let currentSongIndex = 0;
      let songs = [];

      // Function to load all songs and set a random one to play
      function initializeSongsAndSetRandom() {
        fetch("./data/songCollection.json")
          .then((response) => response.json())
          .then((data) => {
            songs = data.songs;
            // Set a random song as the current song
            currentSongIndex = Math.floor(Math.random() * songs.length);
            setSongToPlayer(currentSongIndex, false); // Pass false to not play the song
          })
          .catch((error) => console.error("Error loading songs:", error));
      }

      // Function to set a song to the player
      function setSongToPlayer(index, play = true) {
        const song = songs[index];
        const audioPlayer = document.getElementById("audio-player");
        const songTitleElement = document.getElementById("song-title");
        const artistNameElement = document.getElementById("artist-name");
        const currentSongTitleElement =
          document.getElementById("current-song-title");
        const currentSongArtistElement = document.getElementById(
          "current-song-artist"
        );

        if (song && audioPlayer && songTitleElement && artistNameElement) {
          audioPlayer.src = song.mp3url; // Assuming you have a valid URL to the song file
          songTitleElement.textContent = song.songTitle;
          artistNameElement.textContent = song.artist;

          // Update the Now Playing tab
          if (currentSongTitleElement && currentSongArtistElement) {
            currentSongTitleElement.textContent = song.songTitle;
            currentSongArtistElement.textContent = song.artist;
          }

          // If `play` is true, play the song, otherwise just load it
          if (play) {
            audioPlayer.play();
          }
        }
      }

      // Functions for next and previous song actions
      function nextSong() {
        currentSongIndex = (currentSongIndex + 1) % songs.length;
        setSongToPlayer(currentSongIndex, false); // Autoload the next song without playing
      }

      function previousSong() {
        currentSongIndex =
          (currentSongIndex - 1 + songs.length) % songs.length;
        setSongToPlayer(currentSongIndex, false); // Autoload the previous song without playing
      }

      // Attach event listeners to the bottom controller arrows
      document.addEventListener("DOMContentLoaded", function () {
        initializeSongsAndSetRandom(); // Initialize songs and set a random one to play

        const nextButton = document.getElementById("right-arrow"); // Assuming this is the ID for the next button
        const prevButton = document.getElementById("left-arrow"); // Assuming this is the ID for the previous button

        nextButton.addEventListener("click", nextSong);
        prevButton.addEventListener("click", previousSong);
      });
      document.addEventListener("DOMContentLoaded", function () {
        // Get the play button from the "Now Playing" tab
        const nowPlayingPlayButton = document.querySelector("#play-pause");

        // Get the play button from the bottom play controller
        const bottomPlayButton = document.querySelector("#play");

        // Get the audio player
        const audioPlayer = document.getElementById("audio-player");

        // Add a click event listener to the "Now Playing" play button
        nowPlayingPlayButton.addEventListener("click", function () {
          // Trigger the click event of the bottom play button
          bottomPlayButton.click();

          // Toggle the play/pause icon of the "Now Playing" play button
          if (audioPlayer.paused) {
            nowPlayingPlayButton.querySelector("i").className = "fas fa-play";
          } else {
            nowPlayingPlayButton.querySelector("i").className =
              "fas fa-pause";
          }
        });
      });
    </script>
        <!-- END OF SCRIPT DIV -->
        <div id="supaStuff">
          <!-- script>
        async function signIn(email, password) {
          const { user, error } = await supabase.auth.signIn({
            email: email,
            password: password,
          });

          if (error) console.error("Error logging in:", error);
          else console.log("User logged in:", user);
        }
      </script -->

          <!-- SCRIPT TO SEE IF A USER IS LOGGED IN - WORKING WITH THE LOGIN PAGE -->
          <script>
        document.addEventListener("DOMContentLoaded", function () {
          const urlParams = new URLSearchParams(window.location.search);
          const userEmail = urlParams.get("user");

          if (userEmail) {
            // Display user's email in the top right corner
            // You'll need to have an HTML element to show this information
            document.getElementById(
              "user-info"
            ).textContent = `Logged in as: ${userEmail}`;
          }
        });
      </script>

          <!-- CHECK IF A USER IS LOGGED IN -->
          <script>
        document
          .getElementById("login-btn")
          .addEventListener("click", function () {
            window.location.href = "./js/src/login.html";
          });
      </script>

          <!-- SCRIPT THAT LOADS ARTIST LIST-->
          <script>

        document.addEventListener('DOMContentLoaded', function () {
          fetch('/data/artistCollection.json')
            .then(response => response.json())
            .then(data => {
              const artistList = document.getElementById('artist-list');

              data.artists.forEach(artist => {
                const li = document.createElement('li');
                const a = document.createElement('a');
                a.href = '#';
                a.textContent = artist.name;
                a.onclick = function () {
                  document.getElementById('artist-iframe').src = artist.artistUrl;
                  document.getElementById('artist-iframe-container').style.display = 'block';
                  return false; // Prevent default link behavior
                };
                li.appendChild(a);
                artistList.appendChild(li);
              });
            })
            .catch(error => console.error('Error loading artist data:', error));
        });</script>
          <!-- END OF SCRIPT THAT LOADS ARTIST LIST -->

        </div>
        <!-- ENDOFSCRIPT-->

        <!-- TEST SCRIPTS-->
        <script>
  document.addEventListener('DOMContentLoaded', async () => {
  const { data, error } = await supabase
    .from('songs')
    .select('*');

  if (error) {
    console.error('Error fetching songs:', error);
    return;
  }

  // Assuming you have a container with the id 'song-list' where you want to display the songs
  const songListContainer = document.getElementById('song-list');

  // Clear existing content
  songListContainer.innerHTML = '';

  // Create and append songs to the container
  data.forEach(song => {
    const songElement = document.createElement('div');
    songElement.classList.add('song');
    songElement.innerHTML = `
      <div class="song-thumbnail">
        <img src="${song.thumbnail_url}" alt="${song.songTitle}">
      </div>
      <div class="song-details">
        <h3>${song.songTitle}</h3>
        <p>Artist: ${song.artist}</p>
        <p><a href="${song.artistUrl}" target="_blank">Artist Page</a></p>
        <p><a href="${song.mp3url}" target="_blank">Listen</a></p>
        <p>Duration: ${song.duration}</p>
        ${song.available_for_purchase ? `<a href="${song.buy_url}" class="buy-song" target="_blank">Buy</a>` : ''}
      </div>
    `;
    songListContainer.appendChild(songElement);
  });
});

</script><!-- END OF SONG SCRIPT-->
        <!-- DYNAMIC SHARE TEST -->
        <script src="js/src/share.js"></script>
        <!-- DYANMIC ARTIST TEST -->
        <!--script src="js/src/dynamicArtist.js"></script-->
        <script src="js/src/login.js"></script>
        <script src="js/src/siteCounter.js"></script>
        <!-- END OF DRAFTY SCRIPTS -->
        <!-- CRAFT DRAFTY-->

        <!-- H1 effects - Scroll -->
        <script src="js/src/h1-effects-scroll.js"></script>

        <!-- END OF CRAFTY -->

        <!-- TEST TO SEE IF WORK SCRIPTS -->
        <!-- WORKING SOURCE JAVASCRIPTS -->

        <!-- USER CONTROLS-->
        <script src="js/src/controls-timeline.js"></script>

        <!-- USER JAVASCRIPTS -->
        <script src="js/src/user-cart.js"></script>
        <!-- MARKET JAVASCRIPTS -->
        <script src="js/src/market-physical.js"></script>
        <script src="js/src/market-digital.js"></script>
        <!-- SONG JAVASCRIPT -->
        <script src="js/src/song-loader.js"></script>
        <script src="js/src/search-songs.js"></script>
        <!-- PODCAST JAVASCRIPTS -->
        <script src="js/src/podcast.js"></script>
        <!-- MEDIA JAVASCRIPT -->
        <script src="js/src/media.js"></script>
        <script src="js/src/media-layout-effects.js"></script>
        <!-- GAMES JAVASCRIPT -->
        <script src="js/src/games.js"></script>
        <!-- NEWSLETTER + UDPATES-->
        <script src="js/src/newsletter.js"></script>
        <script src="js/src/updates-commits.js"></script>
        <!-- USER SETTINGS -->
        <script src="js/src/function-switchTheme.js"></script>
        <!-- CORE PAGE-->
        <script src="js/src/tab.js"></script>

        <!-- LOG ERRORS -->

        <!-- CORDOVA PLUGINS -->
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript"
          src="js/cordova-scripts/cordova-musicControls.js"></script>

  </body>
</html>
