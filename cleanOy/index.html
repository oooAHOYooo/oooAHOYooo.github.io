<!DOCTYPE html>
<!-- CLEAN AHOY -->
<html lang="en">
  <head>
    <title>Ahoy Indie Media</title>
    <meta charset="UTF-8" />
    <meta
      name="description"
      content="Ahoy Indie Media is a platform for indie music, podcasts, games, and more."
    />
    <meta name="keywords" content="Indie, Music, Podcasts, Games, Media" />
    <meta name="author" content="Ahoy Indie Media" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="./assets/ahoyFav.png" />
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js/dist/supabase.min.js"></script>

    <!-- GRAPHICAL META SUGAR -->

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="./assets/ahoyFav.png" />
    <!-- Apple Touch Icon (used for iOS) -->
    <link rel="apple-touch-icon" href="./assets/ahoyFav.png" />
    <!-- Manifest for Android devices -->
    <link rel="manifest" href="path_to_your_manifest.json" />
    <!-- Meta tags for mobile devices -->
    <meta name="theme-color" content="#000000" />
    <!-- Sets the toolbar color in Chrome for Android -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!-- iOS app mode -->
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <!-- Status bar appearance -->
    <meta name="apple-mobile-web-app-title" content="Ahoy Indie Media" />
    <!-- Title for iOS app mode -->
    <!-- SUPA INSTALLATION -->
    <script>
      const supabaseUrl = "https://ornjxycoizoybvdhhowp.supabase.co";
      const supabaseKey =
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ybmp4eWNvaXpveWJ2ZGhob3dwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDIzNTA4ODEsImV4cCI6MjAxNzkyNjg4MX0.SIgYEybVeKQ5xGnplA-elTOw0oC5tZIv5nGRUZf-vS8";
      const supabase = supabase.createClient(supabaseUrl, supabaseKey);
    </script>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css"
      integrity="sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="src/foundational.css" />
    <script
      defer
      data-domain="ahoy.ooo"
      src="https://plausible.io/js/script.js"
    ></script>
  </head>

  <body>
    <div class="container">
      <header>
        <a href="./index.html"
          ><img src="./assets/u_ahoy23.png" style="max-width: 20%" /></a
        ><!-- Login Button -->
        <button id="login-btn">Login</button>
        <span id="usernameDisplay"></span>
        <!-- Placeholder for the username -->
      </header>
      <!-- Place this somewhere appropriate in your layout -->
      <div id="user-info" style="position: absolute; top: 10px; right: 10px">
        <!-- User info will be displayed here -->
      </div>

      <div id="tabSortz">
        <!-- HOME TAB -->
        <div id="home-tab" class="tab-content active">
          <div id="home-logo-div">
            <img src="../cleanOy/assets/u_ahoy23.png" />
          </div>
          <br />
          <div class="home-tab-learn-more-wrap">
            <a href="https://github.com/oooAHOYooo/oooAHOYooo.github.io"
              ><button class="common-button">Learn More</button></a
            >
            <a href="./src/getOn/index.html"
              ><button class="common-button">Get On ahoy</button></a
            >
            <a href="https://7ufdbpnl2tt.typeform.com/to/OKeXjt6z"
              ><button class="common-button">Leave Feedback</button></a
            >
          </div>
          <div class="get-started-wrap">
            <a href="./src/started.html"
              ><button class="get-started-button">Get Started</button></a
            >
          </div>
          <!-- NOW PLAYING -->
          <div class="now-playing">
            <h1>Now Playing</h1>
            <!-- <img id="album-art" src="path_to_your_album_art.jpg" alt="Album Art">-->
            <div class="song-info">
              <h2 id="current-song-title">Song Title</h2>
              <h3 id="current-song-artist">Artist Name</h3>
            </div>
            <div class="song-controls">
              <button id="prev" class="control-button">
                <i class="fas fa-step-backward"></i>
              </button>
              <button id="play-pause" class="control-button">
                <i class="fas fa-play"></i>
              </button>
              <button id="next" class="control-button">
                <i class="fas fa-step-forward"></i>
              </button>
            </div>
          </div>
          <!-- END OF NOW PLAYING -->
          <!-- FEATURED MEDIA -->
          <div id="featured-media-container" class="media-container">
            <h2>Featured Media</h2>
            <br />
            <div id="featured-media">
              <!-- Media items will be inserted here by the JavaScript code -->
            </div>
          </div>
          <!-- END OF FEATURED MEDIA -->

          <!-- FEATURED MEDIA JS -->
        </div>
        <!-- MARKET TAB-->
        <div id="market-tab" class="tab-content">Markett Tab</div>
        <!-- SONGS TAB -->
        <div id="songs-tab" class="tab-content">
          <h1>Songs</h1>
          <!-- Control Panel -->
          <div id="control-panel">
            <input type="text" id="search-bar" placeholder="Search songs..." />
            <div class="sort-buttons">
              <button id="sort-az">A-Z</button>
              <button id="sort-recent">Recently Added</button>
            </div>
          </div>
          <ul class="list" id="song-list"></ul>
        </div>
        <!-- MEEEEDIIAA -->
        <div id="media-tab" class="tab-content">
          <h1>Media</h1>
          <div id="jw-player-container" style="width: 100%; height: auto"></div>
          <!-- Media Table -->
          <table id="mediaTable" class="list">
            <thead>
              <tr>
                <th>Thumbnail</th>
                <th>Title</th>
                <th>Play</th>
                <th>Artist</th>
                <th>Duration</th>
              </tr>
            </thead>
            <tbody>
              <!-- Table data will be inserted here -->
            </tbody>
          </table>
        </div>
        <!-- PODCASTS -->
        <div id="podcasts-tab" class="tab-content">
          <h1>Podcasts</h1>
          <table id="podcast-table">
            <thead>
              <tr>
                <th>Play</th>
                <th>Thumbnail</th>
                <th>Title</th>
                <th>Description</th>
                <th>Like</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <!-- AUDIOBOOKS -->
        <div id="audiobooks-tab" class="tab-content">
          <h1>Audiobooks</h1>
          <!-- TABLE OF AUDIOBOOKS COMING FROM A JSON FILE AND WORKS MUCH THE SAME PODCAST WOULD WORK -->
        </div>
        <!-- GAMES -->
        <div id="games-tab" class="tab-content">
          <h1>Games</h1>
          <div class="tabs">
            <button class="tablinks" onclick="openGame(event, 'GameA')">
              Vanca
            </button>
            <button class="tablinks" onclick="openGame(event, 'GameB')">
              Attach
            </button>
            <!-- Add more tabs as needed -->
          </div>

          <div id="GameA" class="tabcontent">
            <button id="load-game-a">Load "Vanca"</button>
            <iframe
              id="game-frame-a"
              style="width: 100%; height: 500px; border: none"
            ></iframe>
            <h1>Vanca</h1>
            <h2>Game by Marco Worms</h2>
            <p>
              For more information about Marco Worms and his projects, visit his
              <a href="https://marcoworms.github.io/" target="_blank">website</a
              >.
            </p>
          </div>

          <div id="GameB" class="tabcontent" style="display: none">
            <button id="load-game-b">Load "Attach""</button>
            <iframe
              id="game-frame-b"
              style="width: 100%; height: 500px; border: none"
            ></iframe>
            <h1>Attach</h1>
            <h2>Game by Marco Worms</h2>
            <p>
              For more information about Marco Worms and his projects, visit his
              <a href="https://marcoworms.github.io/" target="_blank">website</a
              >.
            </p>
          </div>

          <!-- Add more game containers as needed -->
        </div>
        <!-- ARTIST -->
        <div id="artists-tab" class="tab-content">
          <h1>Artists</h1>
          <ul id="artist-list"></ul> <!-- Container for the artist list -->
          <div id="artist-iframe-container" style="display:none;">
              <iframe id="artist-iframe" src="" frameborder="0" style="width:100%; height:600px;"></iframe>
          </div>
      </div>
      <script>
      document.addEventListener('DOMContentLoaded', function() {
        fetch('./data/artistCollection.json')
            .then(response => response.json())
            .then(data => {
                const artistList = document.getElementById('artist-list');
                
                data.artists.forEach(artist => {
                    const li = document.createElement('li');
                    const a = document.createElement('a');
                    a.href = '#';
                    a.textContent = artist.name;
                    a.onclick = function() {
                        document.getElementById('artist-iframe').src = artist.artistUrl;
                        document.getElementById('artist-iframe-container').style.display = 'block';
                        return false; // Prevent default link behavior
                    };
                    li.appendChild(a);
                    artistList.appendChild(li);
                });
            })
            .catch(error => console.error('Error loading artist data:', error));
    });</script>
    


          <!-- Dynamic artist content will be loaded here -->
        </div>
        <!-- UPDATES-->
        <div id="updates-tab" class="tab-content">
          <h1>Updates</h1>
          <!-- NEWSLETTER -->
          <div id="newsletter-tab" class="tab-content-b">
            <!-- h1>Newsletter</h1 -->
            <!-- div id="newsletter-list"></div -->
          </div>

          <h2>Present Beta State = 0.2.2</h2>
          <h3>Last 100 Commits to our open source Repo</h3>
          <div id="commits-list"></div>
        </div>
        <!-- ACCOUNT -->
        <div id="account-tab" class="tab-content">
          <h1>Your Account</h1>
        
          <h2>Your Liked Content</h2>

          <table id="liked-songs-table">
            <thead>
              <tr>
                <th>Artist</th>
                <th>Song</th>
                <th>Play</th>
                <th>Remove</th>
              </tr>
            </thead>
            <tbody>
              <!-- Liked songs will be populated here by the JavaScript function -->
            </tbody>
          </table>
          <h2>Settings</h2>
          <br />
          <h2 id="theme-title"></h2>
          <button onclick="switchTheme()">change theme</button>
          <br />
        </div>

        <!-- PLAYLIST -->
        <div id="playlists-tab" class="tab-content">
          <!-- Playlists content goes here -->
          <div id="playlists-tab" class="tab-content">
            <input
              type="text"
              id="playlist-name"
              placeholder="New Playlist Name"
            />
            <button onclick="createPlaylist()">Create Playlist</button>
            <select id="playlist-selector" onchange="showPlaylist()">
              <!-- Playlist options will be populated here -->
            </select>
            <ul class="list" id="playlist-songs">
              <!-- Playlist songs will be populated here -->
            </ul>
            <ul class="list" id="all-songs">
              <!-- All songs will be populated here with an "Add to Playlist" button -->
            </ul>
          </div>
        </div>
      </div>
      <!--END OF TABS-->
    </div>
    <!--END OF TABS-->

    <!-- BOTTOM PLAYER -->
    <section class="player">
      <div id="progress-bar-container">
        <span id="current-time">0:00</span> /
        <span id="total-duration">0:00</span>
        <div id="progress-bar"></div>
        <div id="playhead"></div>
      </div>

      <div class="player-info">
        <a href="#" id="artist-name" class="player-link">Artist Name</a>
        <a href="#" id="song-title" class="player-link">Song Title</a>
      </div>

      <div class="player-content">
        <div class="player-controls">
          <button id="prev" class="player-button">
            <i class="fas fa-step-backward"></i>
          </button>
          <button id="play" class="player-button">
            <i class="fas fa-play"></i>
          </button>
          <button id="next" class="player-button" onclick="nextSong()">
            <i class="fas fa-step-forward"></i>
          </button>
        </div>
        <div class="player-actions">
          <button id="account" class="player-button">
            <i class="fas fa-user"></i>
          </button>
        </div>
      </div>
      <audio id="audio-player" src=""></audio>
    </section>

    <div class="bottom-controller fixed-bottom">
      <button id="left-arrow" onclick="prevTab()">
        <i class="fas fa-arrow-left"></i>
      </button>
      <span id="tab-indicator">Songs</span>
      <!-- Default text for the first tab -->
      <button id="right-arrow" onclick="nextTab()">
        <i class="fas fa-arrow-right"></i>
      </button>
    </div>
    <!-- div id="visitor-counter">
      Visitors: <span id="visitor-count">Loading...</span>
    </div -->
    <!-- CONDITIONAL LOGIC BITCH -->

    <div id="theScripts">
      <!-- THE WORK IN PROGRESS LIKE FEATURE -->
      <script>
        document.addEventListener("DOMContentLoaded", function () {
          fetch("./data/songCollection.json")
            .then((response) => response.json())
            .then((data) => {
              const songList = document.getElementById("song-list");
              songList.innerHTML = `
                <table>
                    <thead>
                        <tr>
                            <th>Artist</th>
                            <th>Song</th>
                            <th>Play</th>
                            <th>Like</th>
                        </tr>
                    </thead>
                    <tbody id="song-list-body">
                    </tbody>
                </table>
            `;

              const songListBody = document.getElementById("song-list-body");
              data.songs.forEach((song) => {
                const tr = document.createElement("tr");
                tr.innerHTML = `
                    <td>${song.artist}</td>
                    <td class="song-title" data-url="${song.mp3url}" data-artist="${song.artist}" data-title="${song.songTitle}">${song.songTitle}</td>
                    <td><button class="play-button" data-url="${song.mp3url}" data-artist="${song.artist}" data-title="${song.songTitle}"><i class="fas fa-play"></i></button></td>
                    <td><button class="like-button"><i class="fas fa-heart"></i></button></td>
                `;
                songListBody.appendChild(tr);
              });

              const audioPlayer = document.getElementById("audio-player");
              const playButtons = document.querySelectorAll(".play-button");
              const songTitles = document.querySelectorAll(".song-title");

              //THE PLAY FUNCTION
              const playSong = function () {
                const url = this.dataset.url;
                const artist = this.dataset.artist;
                const title = this.dataset.title;
                const playButtons = document.querySelectorAll(".play-button");
                const bottomPlayButton = document.querySelector("#play");
                const bottomPlayIcon = bottomPlayButton.querySelector("i");

                if (audioPlayer.src === url) {
                  if (audioPlayer.paused) {
                    audioPlayer.play();
                    playButtons.forEach((button) => {
                      if (button.dataset.url === url) {
                        button.querySelector("i").className = "fas fa-pause";
                      }
                    });
                    bottomPlayIcon.className = "fas fa-pause";
                  } else {
                    audioPlayer.pause();
                    playButtons.forEach((button) => {
                      if (button.dataset.url === url) {
                        button.querySelector("i").className = "fas fa-play";
                      }
                    });
                    bottomPlayIcon.className = "fas fa-play";
                  }
                } else {
                  audioPlayer.src = url;
                  audioPlayer.play();
                  playButtons.forEach((button) => {
                    if (button.dataset.url === url) {
                      button.querySelector("i").className = "fas fa-pause";
                    } else {
                      button.querySelector("i").className = "fas fa-play";
                    }
                  });
                  bottomPlayIcon.className = "fas fa-pause";
                }

                // Update bottom controller and now playing tab
                document.getElementById("artist-name").textContent = artist;
                document.getElementById("song-title").textContent = title;
                document.getElementById("current-song-title").textContent =
                  title;
                document.getElementById("current-song-artist").textContent =
                  artist;
              };

              playButtons.forEach((button) => {
                button.addEventListener("click", playSong);
              });

              songTitles.forEach((title) => {
                title.addEventListener("click", playSong);
                title.addEventListener("dblclick", function () {
                  if (!audioPlayer.paused) {
                    audioPlayer.pause();
                  }
                });
              });

              // Add event listener to bottom controller play button
              const bottomPlayButton = document.querySelector("#play");
              bottomPlayButton.addEventListener("click", function () {
                const playButtons = document.querySelectorAll(".play-button");
                if (audioPlayer.paused) {
                  audioPlayer.play();
                  this.querySelector("i").className = "fas fa-pause";
                  playButtons.forEach((button) => {
                    if (button.dataset.url === audioPlayer.src) {
                      button.querySelector("i").className = "fas fa-pause";
                    }
                  });
                } else {
                  audioPlayer.pause();
                  this.querySelector("i").className = "fas fa-play";
                  playButtons.forEach((button) => {
                    if (button.dataset.url === audioPlayer.src) {
                      button.querySelector("i").className = "fas fa-play";
                    }
                  });
                }
              });

              // Add event listener for when the song ends
              audioPlayer.addEventListener("ended", function () {
                const playButtons = document.querySelectorAll(".play-button");
                const bottomPlayButton = document.querySelector("#play");
                const bottomPlayIcon = bottomPlayButton.querySelector("i");

                // Change all play button icons in the song list to 'play'
                playButtons.forEach((button) => {
                  button.querySelector("i").className = "fas fa-play";
                });

                // Change the bottom controller play button icon to 'play'
                bottomPlayIcon.className = "fas fa-play";
              });

              //END OF PLAY FEATURE

              //NOW PLAYING STUFF//

              // Get the buttons from the "Now Playing" tab
              const nowPlayingPrevButton = document.querySelector(
                "#nowplaying-tab .control-button#prev"
              );
              const nowPlayingPlayPauseButton = document.querySelector(
                "#nowplaying-tab .control-button#play-pause"
              );
              const nowPlayingNextButton = document.querySelector(
                "#nowplaying-tab .control-button#next"
              );

              // Get the buttons from the bottom play controller
              const bottomPrevButton = document.querySelector(
                ".player-button#prev"
              );
              const bottomPlayPauseButton = document.querySelector(
                ".player-button#play"
              );
              const bottomNextButton = document.querySelector(
                ".player-button#next"
              );

              // Add event listeners to the "Now Playing" buttons that trigger the click events of the corresponding bottom play controller buttons
              nowPlayingPrevButton.addEventListener("click", () =>
                bottomPrevButton.click()
              );
              nowPlayingPlayPauseButton.addEventListener("click", () =>
                bottomPlayPauseButton.click()
              );
              nowPlayingNextButton.addEventListener("click", () =>
                bottomNextButton.click()
              );

              //TIMELINE FEATURE (Needs work)

              // Display the timeline and time remaining on songs
              audioPlayer.addEventListener("timeupdate", function () {
                const currentTime = audioPlayer.currentTime;
                const duration = audioPlayer.duration;
                const timeRemaining = duration - currentTime;
                // Display the timeline and time remaining
                document.getElementById("current-time").textContent =
                  currentTime;
                document.getElementById("time-remaining").textContent =
                  timeRemaining;
              });
            });
        });

        //PREVIOUS AND NEXT FEATURE //

        //LIKE FEATURE //

        // Select like buttons from both song and podcast tables
        const songLikeButtons = document.querySelectorAll(
          "#song-list .like-button"
        );
        const podcastLikeButtons = document.querySelectorAll(
          "#podcast-table .like-button"
        );

        // Combine both NodeLists into an array
        const likeButtons = [...songLikeButtons, ...podcastLikeButtons];

        likeButtons.forEach((button) => {
          button.addEventListener("click", function () {
            this.classList.toggle("liked");
            const likedSongsTable =
              document.getElementById("liked-songs-table");
            const songRow = this.parentElement.parentElement.cloneNode(true);
            songRow.querySelector(".like-button").remove();
            if (this.classList.contains("liked")) {
              // Add a remove button
              const removeButton = document.createElement("button");
              removeButton.innerHTML = '<i class="fas fa-trash"></i>';
              removeButton.classList.add("remove-button");
              removeButton.addEventListener("click", function () {
                this.parentElement.parentElement.remove();
              });
              const removeCell = document.createElement("td");
              removeCell.appendChild(removeButton);
              songRow.appendChild(removeCell);
              likedSongsTable.appendChild(songRow);

              // Add event listener to play button in the cloned row
              const playButton = songRow.querySelector(".play-button");
              playButton.addEventListener("click", playSong);
            } else {
              const rows = Array.from(likedSongsTable.children);
              const index = rows.findIndex(
                (tr) => tr.textContent === songRow.textContent
              );
              likedSongsTable.removeChild(rows[index]);
            }
          });
        });

        //END OF LIKE FEATURE
      </script>
      <!-- LIKE CODE -->

      <script>
        document.addEventListener("DOMContentLoaded", function () {
          const audioPlayer = document.getElementById("audio-player");
          const progressBar = document.getElementById("progress-bar");
          const progressBarContainer = document.getElementById(
            "progress-bar-container"
          );
          const playhead = document.getElementById("playhead");
          const currentTimeDisplay = document.getElementById("current-time");
          const totalDurationDisplay =
            document.getElementById("total-duration");
          let isDragging = false;

          function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secondsPart = Math.floor(seconds % 60);
            return minutes + ":" + (secondsPart < 10 ? "0" : "") + secondsPart;
          }

          function updateProgressBar() {
            const currentTime = audioPlayer.currentTime;
            const duration = audioPlayer.duration || 0;
            const progressPercentage = (currentTime / duration) * 100;
            progressBar.style.width = progressPercentage + "%";
            playhead.style.left = progressPercentage + "%";

            // Update time displays
            currentTimeDisplay.textContent = formatTime(currentTime);
            totalDurationDisplay.textContent = formatTime(duration);
          }

          function seek(event) {
            const bounds = progressBarContainer.getBoundingClientRect();
            const x = event.clientX - bounds.left;
            const totalWidth = bounds.width;
            const clickTime = (x / totalWidth) * audioPlayer.duration;
            audioPlayer.currentTime = clickTime;
            updateProgressBar(); // Ensure the progress bar and playhead are updated
          }

          progressBarContainer.addEventListener("mousedown", function (event) {
            isDragging = true;
            seek(event);
          });

          window.addEventListener("mouseup", function () {
            isDragging = false;
          });

          window.addEventListener("mousemove", function (event) {
            if (isDragging) {
              seek(event);
            }
          });

          audioPlayer.addEventListener("timeupdate", updateProgressBar);

          audioPlayer.addEventListener("loadedmetadata", function () {
            totalDurationDisplay.textContent = formatTime(audioPlayer.duration);
          });

          // Rest of your JavaScript code...
        });
      </script>

      <!-- END OF FEATURED MEDIA JS -->

      <!-- SONG SEARCH SCRIPT -->
      <script>
        document
          .getElementById("search-bar")
          .addEventListener("input", function (e) {
            const searchTerm = e.target.value.toLowerCase();
            const songs = document.querySelectorAll("#song-list li");
            songs.forEach((song) => {
              const title = song.textContent.toLowerCase();
              if (title.includes(searchTerm)) {
                song.style.display = "";
              } else {
                song.style.display = "none";
              }
            });
          });
      </script>

      <!-- PULL THAT GITHUB COMMIT -->
      <script>
        const commitsList = document.getElementById("commits-list");

        fetch(
          "https://api.github.com/repos/oooAHOYooo/oooAHOYooo.github.io/commits?per_page=100"
        )
          .then((response) => response.json())
          .then((commits) => {
            commits.forEach((commit) => {
              const listItem = document.createElement("li");
              listItem.textContent = commit.commit.message;
              commitsList.appendChild(listItem);
            });
          })
          .catch((error) => console.error(error));
      </script>

      <script>
        let currentSongIndex = 0;
        let songs = [];

        // Function to load all songs and set a random one to play
        function initializeSongsAndSetRandom() {
          fetch("./data/songCollection.json")
            .then((response) => response.json())
            .then((data) => {
              songs = data.songs;
              // Set a random song as the current song
              currentSongIndex = Math.floor(Math.random() * songs.length);
              setSongToPlayer(currentSongIndex, false); // Pass false to not play the song
            })
            .catch((error) => console.error("Error loading songs:", error));
        }

        // Function to set a song to the player
        function setSongToPlayer(index, play = true) {
          const song = songs[index];
          const audioPlayer = document.getElementById("audio-player");
          const songTitleElement = document.getElementById("song-title");
          const artistNameElement = document.getElementById("artist-name");
          const currentSongTitleElement =
            document.getElementById("current-song-title");
          const currentSongArtistElement = document.getElementById(
            "current-song-artist"
          );

          if (song && audioPlayer && songTitleElement && artistNameElement) {
            audioPlayer.src = song.mp3url; // Assuming you have a valid URL to the song file
            songTitleElement.textContent = song.songTitle;
            artistNameElement.textContent = song.artist;

            // Update the Now Playing tab
            if (currentSongTitleElement && currentSongArtistElement) {
              currentSongTitleElement.textContent = song.songTitle;
              currentSongArtistElement.textContent = song.artist;
            }

            // If `play` is true, play the song, otherwise just load it
            if (play) {
              audioPlayer.play();
            }
          }
        }

        // Functions for next and previous song actions
        function nextSong() {
          currentSongIndex = (currentSongIndex + 1) % songs.length;
          setSongToPlayer(currentSongIndex, false); // Autoload the next song without playing
        }

        function previousSong() {
          currentSongIndex =
            (currentSongIndex - 1 + songs.length) % songs.length;
          setSongToPlayer(currentSongIndex, false); // Autoload the previous song without playing
        }

        // Attach event listeners to the bottom controller arrows
        document.addEventListener("DOMContentLoaded", function () {
          initializeSongsAndSetRandom(); // Initialize songs and set a random one to play

          const nextButton = document.getElementById("right-arrow"); // Assuming this is the ID for the next button
          const prevButton = document.getElementById("left-arrow"); // Assuming this is the ID for the previous button

          nextButton.addEventListener("click", nextSong);
          prevButton.addEventListener("click", previousSong);
        });
        document.addEventListener("DOMContentLoaded", function () {
          // Get the play button from the "Now Playing" tab
          const nowPlayingPlayButton = document.querySelector("#play-pause");

          // Get the play button from the bottom play controller
          const bottomPlayButton = document.querySelector("#play");

          // Get the audio player
          const audioPlayer = document.getElementById("audio-player");

          // Add a click event listener to the "Now Playing" play button
          nowPlayingPlayButton.addEventListener("click", function () {
            // Trigger the click event of the bottom play button
            bottomPlayButton.click();

            // Toggle the play/pause icon of the "Now Playing" play button
            if (audioPlayer.paused) {
              nowPlayingPlayButton.querySelector("i").className = "fas fa-play";
            } else {
              nowPlayingPlayButton.querySelector("i").className =
                "fas fa-pause";
            }
          });
        });
      </script>

      <!-- END OF SCRIPT DIV -->
    </div>

    <div id="supaStuff">
      <!-- script>
        async function signIn(email, password) {
          const { user, error } = await supabase.auth.signIn({
            email: email,
            password: password,
          });

          if (error) console.error("Error logging in:", error);
          else console.log("User logged in:", user);
        }
      </script -->
      <!-- script>
        const updateUIForLoggedInUser = (user) => {
          if (user) {
            document.getElementById(
              "usernameDisplay"
            ).textContent = `Welcome, ${user.email}`;
            // Hide login button, show logout button, etc.
          } else {
            // Show login button, hide logout button, etc.
          }
        };

        supabase.auth.onAuthStateChange((event, session) => {
          updateUIForLoggedInUser(session?.user);
        });
      </script -->
      <!-- SCRIPT TO SEE IF A USER IS LOGGED IN - WORKING WITH THE LOGIN PAGE -->
      <script>
        document.addEventListener("DOMContentLoaded", function () {
          const urlParams = new URLSearchParams(window.location.search);
          const userEmail = urlParams.get("user");

          if (userEmail) {
            // Display user's email in the top right corner
            // You'll need to have an HTML element to show this information
            document.getElementById(
              "user-info"
            ).textContent = `Logged in as: ${userEmail}`;
          }
        });
      </script>

      <!-- script>
        document
          .getElementById("login-form")
          .addEventListener("submit", async (e) => {
            e.preventDefault();
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;
            await signIn(email, password);
          });
      </script -->

      <!-- CHECK IF A USER IS LOGGED IN -->
      <script>
        document
          .getElementById("login-btn")
          .addEventListener("click", function () {
            window.location.href = "./src/login.html";
          });
      </script>
    </div>
    <!-- ENDFOSCRIPT-->
    <!-- DYNAMIC SHARE TEST -->
    <script src="./src/share.js"></script>
    <!-- DYANMIC ARTIST TEST -->
    <!--script src="./src/dynamicArtist.js"></script-->
    <script src="./src/login.js"></script>
    <script src="./src/siteCounter.js"></script>
    <!-- END OF DRAFTY SCRIPTS -->
    <script src="./src/featuredMedia.js"></script>
    <!-- WORKING SOURCE JAVASCRIPTS -->
    <script src="./src/newsletter.js"></script>
    <script src="./src/games.js"></script>
    <!-- script src="./src/artists.js"></script -->
    <script src="./src/updates-commits.js"></script>
    <script src="./src/function-switchTheme.js"></script>
    <!--script src="./src/cable.js"></script-->
    <script src="./src/media.js"></script>
    <script src="./src/podcast.js"></script>
    <script src="./src/tab.js"></script>
  </body>
</html>
