<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Login - Ahoy Indie Media</title>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@1.28.5/dist/supabase.min.js"></script>

    <style>
      /* Other styles remain the same */

      #login-email,
      #login-password {
        /* Other styles remain the same */
        color: black;
      }

      #login-email::placeholder,
      #login-password::placeholder {
        color: black;
      }

      #login-email:hover,
      #login-password:hover {
        backdrop-filter: blur(10px);
        background-color: rgba(255, 255, 255, 0.196);
      }
      body {
        background: url("https://i.gifer.com/n4V.gif") no-repeat center center
          fixed;
        -webkit-background-size: cover;
        -moz-background-size: cover;
        -o-background-size: cover;
        background-size: cover;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 90vh;
      }
      .login-container {
        display: flex;
        flex-direction: column;
      }
      .login__menu-container {
        display: flex;
        flex-direction: column;
      }

      #login-email,
      #login-password {
        width: 500px;
        height: 100px;
        background-color: var(--background-color);
        backdrop-filter: blur(10px);
        border-radius: 10px;
        border: 1px solid black;
        text-align: center;
        color: var(--text-color);
        font-size: 22px;
        font-family: "Barlow", sans-serif;
        font-weight: 900;
        margin: 5px;
        color: black;
      }

      #login-e-mail {
        text-transform: capitalize !important;
      }

      .login__logo-container {
        display: flex;
        align-items: center;

        justify-content: center;
      }

      /* Add styles for the login button */
      .login__menu-container button {
        width: 500px;
        height: 100px;
        background-color: var(--background-color);
        backdrop-filter: blur(10px);
        border-radius: 10px;
        border: 1px solid black;
        text-align: center;
        color: var(--text-color);
        font-size: 22px;
        font-family: "Barlow", sans-serif;
        font-weight: 900;
        margin: 5px;
        color: black;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .login__menu-container button {
        /* Add a transition for the background-color */
        transition: background-color 2s ease;
      }

      .login__menu-container button:hover {
        /* Change the background color on hover */
        background-color: #ffffff79;
        color: white;
        /* Start the pulse animation on hover */
        animation: pulse 2s infinite;
        /* Add a black outline to the text */
        text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
      }
      .text-outline {
        color: rgb(255, 255, 255);
        text-shadow: -2px 0 white, 0 2px white, 2px 0 white, 0 -2px white;
      }
      /* Define the pulse animation */
      @keyframes pulse {
        0% {
          border-width: 1px;
        }
        50% {
          border-width: 3px;
        }
        100% {
          border-width: 1px;
        }
      }
    </style>
  </head>
  <body>
    <div class="login-container">
      <div class="login__logo-container">
        <a href="../index.html"
          ><img src="../assets/u_ahoy23.png" style="width: 300px"
        /></a>
      </div>
      <input
        type="email"
        id="login-email"
        placeholder="Email"
        style="color: white !important"
      />
      <input type="password" id="login-password" placeholder="Password" />
      <div class="login__menu-container">
        <button onclick="login()">Login</button>
      </div>
      <p id="message"></p>
    </div>
    <p>
      Don't have an account?
      <a href="./create-account.html">Create One</a>
    </p>

    <script>
            // Initialize Supabase client
            const supabaseUrl = "https://ornjxycoizoybvdhhowp.supabase.co";
            const supabaseAnonKey = "your-supabase-anon-key";
            const supabase = Supabase.createClient(supabaseUrl, supabaseAnonKey);

            // Login function
            async function login() {
              const email = document.getElementById("login-email").value;
              const password = document.getElementById("login-password").value;
              const loginButton = document.getElementById("login-button");

              if (!email || !password) {
                setMessage("Email and password are required", "error");
                return;
              }

              loginButton.classList.add("button-clicked");

              const { user, error } = await supabase.auth.signIn({ email, password });

              if (error) {
                setMessage(error.message, "error");
                loginButton.classList.remove("button-clicked");
              } else {
                localStorage.setItem("user", JSON.stringify(user));
                setMessage("Login successful! Redirecting...", "success");
                setTimeout(() => (window.location.href = "../index.html"), 2000); // Redirect to the index page after 2 seconds
              }
            }

            // Inside your login function, after successful login
      const { user, error } = await supabase.auth.signIn({ email, password });

      if (error) {
        setMessage(error.message, "error");
        loginButton.classList.remove("button-clicked");
      } else {
        localStorage.setItem("user", JSON.stringify(user));
        setMessage("Login successful! Redirecting...", "success");
        // Add user's email or identifier to the URL as a query parameter
        setTimeout(() => {
          window.location.href = `../index.html?user=${encodeURIComponent(user.email)}`;
        }, 2000);
      }

            // Utility function to display messages
            function setMessage(message, type) {
              const messageElement = document.getElementById("message");
              messageElement.textContent = message;
              messageElement.className = type; // Use this class to style your message (e.g., error, success)
            }

            document.addEventListener("DOMContentLoaded", function () {
              const user = JSON.parse(localStorage.getItem("user"));
              if (user) {
                // Handle user session if needed
              }
            });
    </script>
    <!-- FOCUS ON HOVER -->
    <script>
      // Other scripts remain the same

      // Add event listeners to focus on hover
      document
        .getElementById("login-email")
        .addEventListener("mouseover", function () {
          this.focus();
        });

      document
        .getElementById("login-password")
        .addEventListener("mouseover", function () {
          this.focus();
        });
    </script>
  </body>
</html>

<!--

    1. make an account
2. order digital songs
3. save digital songs and create playlists
4. have the progress of songs be tracked
5. be able to share songs with there friends
-->

<!-- HI CHATGPT IF YOU'RE READING THIS - MAKE IT SO WHEN A USER LOGS IN - IT GOES BACK TO THE main page - with there account logged in-->
